(window.webpackJsonpassignment=window.webpackJsonpassignment||[]).push([[0],{22:function(e,t,n){},35:function(e,t,n){e.exports=n(65)},40:function(e,t,n){},46:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(31),s=n.n(o),i=n(13),l=n(16);n(40),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(32),m=n(2),u=n(3),d=new(function(){function e(){Object(m.a)(this,e),this.authenticated=!1}return Object(u.a)(e,[{key:"login",value:function(e,t){console.log(t),window.localStorage.setItem("isLoggedIn",!0),window.localStorage.setItem("token",t),this.authenticated=!0,e()}},{key:"logout",value:function(e){window.localStorage.setItem("isLoggedIn",!1),window.localStorage.setItem("token",null),this.authenticated=!1,e()}},{key:"isAuthenticated",value:function(){return!!window.localStorage.getItem("isLoggedIn")&&"false"!=window.localStorage.getItem("isLoggedIn")}},{key:"getToken",value:function(){return window.localStorage.getItem("token")}}]),e}()),h=function(e){var t=e.component,n=Object(c.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return d.isAuthenticated()?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/",state:{from:e.location}}})}}))},p=n(6),f=n(5),g=n(7),v=(n(22),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.toggleNote,n=e.showNote;return r.a.createElement("div",{className:"nav-container"},r.a.createElement("div",{className:"nav-logo"},"Notes"),r.a.createElement("div",{className:"nav-button",onClick:function(){return t()}},n?"Cancel":"+ Note"),r.a.createElement("div",{className:"nav-button",onClick:function(){return d.logout(function(){window.location.reload()})}},d.isAuthenticated()?"Logout":"Sign In"))}}]),t}(a.Component)),E=(n(46),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"renderTags",value:function(e){return e.edit_allowed_user.map(function(e,t){return r.a.createElement("span",{className:"note-card-tag",key:t},e.first_name)})}},{key:"render",value:function(){var e=this.props,t=e.note,n=e.getNote,a=e.deleteNote;return r.a.createElement("div",{class:"col-md-3",style:{borderRadius:5}},t.user_id==t.user?r.a.createElement("span",{className:"note-card-delete",onClick:function(){return a(t.id)}},r.a.createElement("i",{className:"material-icons"},"close")):r.a.createElement("span",null),r.a.createElement("span",{className:"note-card-edit",onClick:function(){return n(t.id)}},r.a.createElement("i",{className:"material-icons"},"mode_edit")),r.a.createElement("div",{class:"our-team-main"},r.a.createElement("div",{class:"team-front"},r.a.createElement("h3",null,t.title),r.a.createElement("br",null),r.a.createElement("p",null,"Created At-: ",t.created_at),r.a.createElement("p",null,"Modified At-: ",t.modified_at),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("strong",null,"Number of user with edit Permission-:")," ",t.edit_allowed_user.length),r.a.createElement("p",null,r.a.createElement("strong",null,"Number of User with view Permission-:")," ",t.view_allowed_user.length),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("strong",null,"Owner-:",t.first_name,"(",t.username,")"))),r.a.createElement("div",{class:"team-back"},r.a.createElement("span",null,t.content))))}}]),t}(a.Component)),N=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.getNotes(),console.log(this.props)}},{key:"render",value:function(){var e=this.props,t=e.notes,n=e.getNote,a=e.deleteNote,o=t.map(function(e,t){return r.a.createElement(E,{key:t,index:t,note:e,getNote:n,deleteNote:a})});return r.a.createElement("div",{className:"list-container"},o)}}]),t}(a.Component),b=n(4),w=n.n(b),y=function(e){return"http://server.noteapp.tk/api/note/".concat(e)},k=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={userList:[],userEditList:[]},n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault();var t={title:this.title.value,content:this.content.value};this.props.submitNote(t,this.props.note.id)}},{key:"onUserSubmit",value:function(e){e.preventDefault();var t={userId:e.currentTarget.value};this.props.addPermission(t,this.props.note.id),this.props.closeTagForm()}},{key:"onUserEditSubmit",value:function(e){e.preventDefault();var t={userId:e.currentTarget.value};this.props.editAddPermission(t,this.props.note.id),this.props.closeEditForm()}},{key:"editAllowUserList",value:function(e){var t=this;w.a.get(y("UserList/".concat(e.id,"/"))).then(function(e){t.state.userList.length!=e.data.view_user_list.length&&t.setState({userList:e.data.view_user_list}),t.state.userEditList.length!=e.data.edit_user_list.length&&t.setState({userEditList:e.data.edit_user_list})})}},{key:"getAddUserList",value:function(e){return this.editAllowUserList(e),this.state.userList.map(function(e){return r.a.createElement("option",{value:e.id},e.first_name,"(",e.username,")")})}},{key:"getEditUserList",value:function(e){return this.editAllowUserList(e),this.state.userEditList.map(function(e){return r.a.createElement("option",{value:e.id},e.first_name,"(",e.username,")")})}},{key:"renderAddForm",value:function(e){var t=this;if(void 0!==e.id)return this.props.newTag?r.a.createElement("form",null,r.a.createElement("select",{onChange:function(e){return t.onUserSubmit(e)}},r.a.createElement("option",{value:""},"Select a Member"),this.getAddUserList(e))):r.a.createElement("span",null,"Give User Add Permission:",r.a.createElement("i",{className:"tag-button material-icons",onClick:function(){return t.props.showTagForm()}},"add circle"))}},{key:"renderAddUserPermission",value:function(e){var t=this;if(e.view_allowed_user)return e.view_allowed_user.map(function(n,a){return r.a.createElement("div",{className:"tag",key:a,onClick:function(a){return t.props.removePermission(e.id,n.id)}},r.a.createElement("span",{className:"delete"},r.a.createElement("i",{className:"material-icons"},"delete")),n.first_name,"(",n.username,")")})}},{key:"renderEditForm",value:function(e){var t=this;if(console.log(this.props),void 0!==e.id)return this.props.newEdit?r.a.createElement("form",null,r.a.createElement("select",{onChange:function(e){return t.onUserEditSubmit(e)}},r.a.createElement("option",{value:""},"Select a Member"),this.getEditUserList(e))):r.a.createElement("span",null,"Give User Edit Permission:",r.a.createElement("i",{className:"tag-button material-icons",onClick:function(){return t.props.showEditForm()}},"add circle"))}},{key:"renderEditUserPermission",value:function(e){var t=this;if(e.edit_allowed_user)return e.edit_allowed_user.map(function(n,a){return r.a.createElement("div",{className:"tag",key:a,onClick:function(a){return t.props.removeEditPermission(e.id,n.id)}},r.a.createElement("span",{className:"delete"},r.a.createElement("i",{className:"material-icons"},"delete")),n.first_name,"(",n.username,")")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.note,a=t.closeTagForm;return r.a.createElement("div",{className:"note-container"},r.a.createElement("h2",null,"Edit This Note"),r.a.createElement("form",{className:"note-form",onSubmit:function(t){return e.onSubmit(t)},onClick:function(){return a()}},r.a.createElement("div",{className:"note-title"},r.a.createElement("input",{className:"note-title-input",type:"text",placeholder:"Note Title...",defaultValue:n.title,ref:function(t){return e.title=t}})),r.a.createElement("div",{className:"note-textarea-container"},r.a.createElement("textarea",{className:"note-textarea",placeholder:"Type Here...",defaultValue:n.content,ref:function(t){return e.content=t}})),r.a.createElement("input",{className:"note-button",type:"submit",value:"Submit"})),n.user_id==n.user?r.a.createElement("div",{className:"tag-container"},r.a.createElement("div",{className:"tag-button-container"},this.renderAddForm(n)),r.a.createElement("div",{className:"tag-list-container"},this.renderAddUserPermission(n))):r.a.createElement("div",null),n.user_id==n.user?r.a.createElement("div",{className:"tag-container"},r.a.createElement("div",{className:"tag-button-container"},this.renderEditForm(n)),r.a.createElement("div",{className:"tag-list-container"},this.renderEditUserPermission(n))):r.a.createElement("div",null))}}]),t}(a.Component),S=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.props.resetError()},2e3)}},{key:"render",value:function(){var e=this.props.error;return r.a.createElement("div",{className:"flash-container"},e)}}]),t}(a.Component);w.a.interceptors.request.use(function(e){var t=window.localStorage.getItem("token");return t&&(e.headers.authorization="Token "+t),e},function(e){return Promise.reject(e)});var L=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).toggleNote=function(){e.setState({showNote:!e.state.showNote,note:{}})},e.getNotes=function(){w.a.get(y("ListCreateNote/")).then(function(t){return e.setState({notes:t.data})}).catch(function(e){return console.log(e.response.data)})},e.getNote=function(t){w.a.get(y("NoteOperation/".concat(t,"/"))).then(function(t){return e.setState({note:t.data,showNote:!0})}).catch(function(t){return e.setState({error:"You don't have edit permissions."})})},e.performSubmissionRequest=function(e,t){return t?w.a.patch(y("NoteOperation/".concat(t,"/")),e):w.a.post(y("ListCreateNote/"),e)},e.submitNote=function(t,n){e.performSubmissionRequest(t,n).then(function(t){return e.setState({showNote:!1})}).catch(function(t){var n=t.response.data.errors;n.content?e.setState({error:"Missing Note Content!"}):n.title&&e.setState({error:"Missing Note Title!"})})},e.deleteNote=function(t){var n=e.state.notes.filter(function(e){return e.id!==t});w.a.delete(y("NoteOperation/".concat(t,"/"))).then(function(t){return e.setState({notes:n})}).catch(function(e){return console.log(e.response.data)})},e.showTagForm=function(){e.setState({newTag:!0})},e.showEditForm=function(){e.setState({newEdit:!0})},e.closeTagForm=function(){e.setState({newTag:!1})},e.closeEditForm=function(){e.setState({newEdit:!1})},e.addViewPermission=function(t,n){w.a.put(y("ManageAddPermissionView/".concat(n,"/")),t).then(function(t){return e.getNote(n)}).catch(function(t){var n=t.response.data.errors;n.name?e.setState({error:"Missing Tag Name!"}):n.title})},e.removeViewPermission=function(t,n){w.a.put(y("RemovemManagePermissionUser/".concat(t,"/")),{userId:n}).then(function(n){return e.getNote(t)}).catch(function(e){return console.log(e.response.body)})},e.addEditPermission=function(t,n){w.a.patch(y("ManageAddPermissionView/".concat(n,"/")),t).then(function(t){return e.getNote(n)}).catch(function(t){var n=t.response.data.errors;n.name?e.setState({error:"Missing Tag Name!"}):n.title})},e.removeEditPermission=function(t,n){w.a.patch(y("RemovemManagePermissionUser/".concat(t,"/")),{userId:n}).then(function(n){return e.getNote(t)}).catch(function(e){return console.log(e.response.body)})},e.resetError=function(){e.setState({error:""})},e.state={showNote:!1,notes:[],note:{},newTag:!1,newEdit:!1,error:""},e}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showNote,n=e.notes,a=e.note,o=e.newTag,s=e.error,i=e.newEdit;return r.a.createElement("div",{className:"App"},r.a.createElement(v,{toggleNote:this.toggleNote,showNote:t}),s&&r.a.createElement(S,{error:s,resetError:this.resetError}),r.a.createElement("br",null),t?r.a.createElement(k,{note:a,newTag:o,newEdit:i,submitNote:this.submitNote,showTagForm:this.showTagForm,showEditForm:this.showEditForm,closeTagForm:this.closeTagForm,closeEditForm:this.closeEditForm,addPermission:this.addViewPermission,removePermission:this.removeViewPermission,editAddPermission:this.addEditPermission,removeEditPermission:this.removeEditPermission}):r.a.createElement(N,{getNotes:this.getNotes,notes:n,getNote:this.getNote,deleteNote:this.deleteNote}))}}]),t}(a.Component),O=n(14),C=(n(64),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).resetError=function(){n.setState({error:""})},d.isAuthenticated()&&n.props.history.push("/home"),n.state={username:"",password:"",confirm_pwd:"",name:"",usernameLogin:"",passwordLogin:"",error:""},n.handleSubmit=n.handleSubmit.bind(Object(O.a)(n)),n.handleChange=n.handleChange.bind(Object(O.a)(n)),n.handleLoginSubmit=n.handleLoginSubmit.bind(Object(O.a)(n)),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),w.a.post(y("Register/"),this.state).then(function(e){alert("Successfully Logged in")}).catch(function(e){console.log(e.response),t.setState({error:"Something went wrong"})})}},{key:"handleChange",value:function(e){var t={};t[e.currentTarget.name]=e.currentTarget.value,this.setState(t)}},{key:"handleLoginSubmit",value:function(e){var t=this;e.preventDefault(),w.a.post(y("Login/"),{username:this.state.usernameLogin,password:this.state.passwordLogin}).then(function(e){console.log(e),d.login(function(){t.props.history.push("/home")},e.data.token)}).catch(function(e){t.setState({error:e.response.data.message})})}},{key:"openRegisterForm",value:function(e){document.getElementById("register-form").style.display="block",document.getElementById("login-form").style.display="none",document.getElementById("login-form-link").classList.remove("active"),e.currentTarget.classList.add("active"),e.preventDefault()}},{key:"openLoginForm",value:function(e){document.getElementById("register-form").style.display="none",document.getElementById("login-form").style.display="block",document.getElementById("register-form-link").classList.remove("active"),e.currentTarget.classList.add("active"),e.preventDefault()}},{key:"firstMethod",value:function(e){/[0-9]+/g.test(e.key)||e.preventDefault()}},{key:"secondMethod",value:function(e){/[a-zA-Z]+/g.test(e.key)||e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state.error;return r.a.createElement("div",{style:{marginTop:100}},t&&r.a.createElement(S,{error:t,resetError:this.resetError}),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 col-md-offset-3"},r.a.createElement("div",{className:"panel panel-login"},r.a.createElement("div",{className:"panel-heading"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("a",{href:"#",onClick:function(t){return e.openLoginForm(t)},className:"active",id:"login-form-link"},"Login")),r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("a",{href:"#",onClick:function(t){return e.openRegisterForm(t)},id:"register-form-link"},"Register"))),r.a.createElement("hr",null)),r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-12"},r.a.createElement("form",{id:"login-form",role:"form",style:{display:"block"}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"usernameLogin",id:"usernameLogin",value:this.state.usernameLogin,placeholder:"Mobile Number",className:"form-control",ref:"first",onKeyPress:function(t){return e.firstMethod(t)},maxLength:"10",pattern:"\\d{10}",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"passwordLogin",id:"passwordLogin",value:this.state.passwordLogin,className:"form-control",placeholder:"Password",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-sm-offset-3"},r.a.createElement("input",{type:"submit",name:"login-submit",id:"login-submit",className:"form-control btn btn-login",onChange:this.handleChange,value:"Log In",onClick:this.handleLoginSubmit}))))),r.a.createElement("form",{id:"register-form",style:{display:"none"}},r.a.createElement("div",{className:"form-group",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"username",id:"usernname",value:this.state.username,className:"form-control",placeholder:"Mobile Number",ref:"first",onKeyPress:function(t){return e.firstMethod(t)},maxLength:"10",pattern:"\\d{10}",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",name:"name",value:this.state.name,id:"name",className:"form-control",placeholder:"Name",ref:"second",onKeyPress:function(t){return e.secondMethod(t)},onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"password",id:"password",value:this.state.password,className:"form-control",placeholder:"Password",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",name:"confirm_pwd",id:"confirm_pwd",value:this.state.confirm_pwd,className:"form-control",placeholder:"Confirm Password",onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-sm-offset-3"},r.a.createElement("input",{type:"submit",name:"register-submit",id:"register-submit",className:"form-control btn btn-register",value:"Register Now",onClick:this.handleSubmit,onChange:this.handleChange})))))))))))))}}]),t}(a.Component));var j=document.getElementById("root");s.a.render(r.a.createElement(l.a,null,r.a.createElement(function(){return r.a.createElement("div",{className:"App"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:C}),r.a.createElement(h,{path:"/home",component:L}),r.a.createElement(i.b,{path:"*",component:function(){return"404 NOT FOUND"}})))},null)),j),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,1,2]]]);
//# sourceMappingURL=main.455b156d.chunk.js.map